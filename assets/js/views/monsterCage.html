<div ng-repeat="userMonsters in user">
  <div class="monsterCage">

    <div class="sectionTitle">

      <h4>
        <strong><input ng-model="userMonsters.monsterArray.name"
        ng-value="userMonsters.monsterArray.name"
        ng-change="change(userMonsters, 'name')"</strong>
      </h4>
      <p>
        <span>
            {{userMonsters.monsterArray.size}}
            {{userMonsters.monsterArray.type}} {{userMonsters.monsterArray.subtype}},
            {{userMonsters.monsterArray.alignment}}
            (Challenge: {{userMonsters.monsterArray.challenge_rating}})
      </span>
      <div class="monsterStats">
        <button class="blue_btn" ng-click="showMonsterStats = showMonsterStats== 0 ? 1 : 0" ng-class="{active:showMonsterStats == 1}">Stats</button>
        <button class="green_btn"  ng-click="showMonsterActions = showMonsterActions== 0 ? 1 : 0; showLegendButton = true" ng-class="{active:showMonsterActions == 1}">Abilities</button>
        <button class="gray_btn" ng-click="removeMonster(userMonsters)">X</button>
      </div>
      </p>

    </div>

    <div class="monsterWrapper" ng-init="showMonsterStats = false" ng-show="showMonsterStats">
    <div class="section">
      <p><strong>Speed:</strong></p>
      <p>
        <input ng-model="userMonsters.monsterArray.speed" ng-value="userMonsters.monsterArray.speed" ng-change="change(userMonsters, 'speed')" />
      </p>
      <strong>HP:</strong>
       <p>Max:
         <input type="number" ng-model="userMonsters.monsterArray.hit_points" ng-value="userMonsters.monsterArray.hit_points"
         ng-change="change(userMonsters, 'hit_points')" />
          <sup>
            (<input ng-model="userMonsters.monsterArray.hit_dice" ng-value="userMonsters.monsterArray.hit_dice"
            ng-change="change(userMonsters, 'hit_dice')" />)
          </sup></p>
    </div>

    <div class="section">
      <p><strong>Attributes: </strong></p>
        <label>Str:
        <input type="number"
          ng-model="userMonsters.monsterArray.strength" ng-value="userMonsters.monsterArray.strength"
          ng-change="change(userMonsters, 'strength')" />
        </label>
        <label>Dex:
        <input type="number"
          ng-model="userMonsters.monsterArray.dexterity" ng-value="userMonsters.monsterArray.dexterity"
          ng-change="change(userMonsters, 'dexterity')" />
        </label>
        <label>Con:
        <input type="number"
          ng-model="userMonsters.monsterArray.constitution" ng-value="userMonsters.monsterArray.constitution"
          ng-change="change(userMonsters, 'constitution')" />
        </label>
        <label>Int:
        <input type="number"
          ng-model="userMonsters.monsterArray.intelligence" ng-value="userMonsters.monsterArray.intelligence"
          ng-change="change(userMonsters, 'intelligence')" />
        </label>
        <label>Wis:
        <input type="number"
          ng-model="userMonsters.monsterArray.wisdom" ng-value="userMonsters.monsterArray.wisdom"
          ng-change="change(userMonsters, 'wisdom')" />
        </label>
        <label>Cha:
        <input type="number"
          ng-model="userMonsters.monsterArray.charisma" ng-value="userMonsters.monsterArray.charisma"
          ng-change="change(userMonsters, 'charisma')" />
        </label>
    </div>

    <div class="section">
      <p><strong>Saving Throws:</strong></p>
        <label>
          Str+<input type="number"
          ng-model="userMonsters.monsterArray.strength_save"
          ng-value="userMonsters.monsterArray.strength_save"
          ng-change="change(userMonsters, 'strength_save')" />
        </label>
        <label>
          Dex+<input type="number"
          ng-model="userMonsters.monsterArray.dexterity_save"
          ng-value="userMonsters.monsterArray.dexterity_save"
          ng-change="change(userMonsters, 'dexterity_save')" />
        </label>
        <label>
          Con+<input type="number"
          ng-model="userMonsters.monsterArray.constitution_save"
          ng-value="userMonsters.monsterArray.constitution_save"
          ng-change="change(userMonsters, 'constitution_save')" />
        </label>
        <label>
          Int+<input type="number"
          ng-model="userMonsters.monsterArray.intelligence_save"
          ng-value="userMonsters.monsterArray.intelligence_save"
          ng-change="change(userMonsters, 'intelligence_save')" />
        </label>
        <label>
          Wis+<input type="number"
          ng-model="userMonsters.monsterArray.wisdom_save"
          ng-value="userMonsters.monsterArray.wisdom_save"
          ng-change="change(userMonsters, 'wisdom_save')" />
        </label>
        <label>
          Cha+<input type="number"
          ng-model="userMonsters.monsterArray.charisma_save"
          ng-value="userMonsters.monsterArray.charisma_save"
          ng-change="change(userMonsters, 'charisma_save')" />
        </label>

        <div id="skills" class="section">
          <p><strong>Skills: </strong></p>
          <ul>
            <li>
              +<input type="number"
              ng-model="userMonsters.monsterArray.acrobatics"
              ng-value="userMonsters.monsterArray.acrobatics"
              ng-change="change(userMonsters, 'acrobatics')" /> Acrobatics (Dex)
            </li>
            <li>
              +<input type="number"
              ng-model="userMonsters.monsterArray.arcana"
              ng-value="userMonsters.monsterArray.arcana"
              ng-change="change(userMonsters, 'arcana')" /> Arcana (Int)
            </li>
            <li>
              +<input type="number"
              ng-model="userMonsters.monsterArray.athletics"
              ng-value="userMonsters.monsterArray.athletics"
              ng-change="change(userMonsters, 'athletics')" /> Athletics (Str)
            </li>
            <li>
              +<input type="number"
              ng-model="userMonsters.monsterArray.deception"
              ng-value="userMonsters.monsterArray.deception"
              ng-change="change(userMonsters, 'deception')" /> Deception (Cha)
            </li>
          </ul>
          <ul>
            <li>
              +<input type="number"
              ng-model="userMonsters.monsterArray.history"
              ng-value="userMonsters.monsterArray.history"
              ng-change="change(userMonsters, 'history')" /> History (Int)
            </li>
            <li>
              +<input type="number"
              ng-model="userMonsters.monsterArray.insight"
              ng-value="userMonsters.monsterArray.insight"
              ng-change="change(userMonsters, 'insight')" /> Insight (Wis)
            </li>
            <li>
              +<input type="number"
              ng-model="userMonsters.monsterArray.intimidation"
              ng-value="userMonsters.monsterArray.intimidation"
              ng-change="change(userMonsters, 'intimidation')" /> Intimidation (Cha)
            </li>
            <li>
              +<input type="number"
              ng-model="userMonsters.monsterArray.investigation"
              ng-value="userMonsters.monsterArray.investigation"
              ng-change="change(userMonsters, 'investigation')" /> Investigation (Int)
            </li>
          </ul>
          <ul>
            <li>
              +<input type="number"
              ng-model="userMonsters.monsterArray.medicine"
              ng-value="userMonsters.monsterArray.medicine"
              ng-change="change(userMonsters, 'medicine')" /> Medicine (Wis)
            </li>
            <li>
              +<input type="number"
              ng-model="userMonsters.monsterArray.nature"
              ng-value="userMonsters.monsterArray.nature"
              ng-change="change(userMonsters, 'nature')" /> Nature (Int)
            </li>
            <li>
              +<input type="number"
              ng-model="userMonsters.monsterArray.perception"
              ng-value="userMonsters.monsterArray.perception"
              ng-change="change(userMonsters, 'perception')" /> Perception (Wis)
            </li>
            <li>
              +<input type="number"
              ng-model="userMonsters.monsterArray.performance"
              ng-value="userMonsters.monsterArray.performance"
              ng-change="change(userMonsters, 'performance')" /> Performance (Cha)
            </li>
          </ul>
          <ul>
            <li>
              +<input type="number"
              ng-model="userMonsters.monsterArray.persuasion"
              ng-value="userMonsters.monsterArray.persuasion"
              ng-change="change(userMonsters, 'persuasion')" /> Persuasion (Cha)
            </li>
            <li>
              +<input type="number"
              ng-model="userMonsters.monsterArray.religion"
              ng-value="userMonsters.monsterArray.religion"
              ng-change="change(userMonsters, 'religion')" /> Religion (Int)
            </li>
            <li>
              +<input type="number"
              ng-model="userMonsters.monsterArray.stealth"
              ng-value="userMonsters.monsterArray.stealth"
              ng-change="change(userMonsters, 'stealth')" /> Stealth (Dex)
            </li>
            <li>
              +<input type="number"
              ng-model="userMonsters.monsterArray.survival"
              ng-value="userMonsters.monsterArray.survival"
              ng-change="change(userMonsters, 'survival')" /> Survival (Wis)
            </li>
          </ul>
        </div>

        <div class="section">
          <p><strong>Damage Resistance/Immunities/Vulnerabilites: </strong></p>
            <label>
              Resistant to <input
              ng-model="userMonsters.monsterArray.damage_resistances"
              ng-value="userMonsters.monsterArray.damage_resistances"
              ng-change="change(userMonsters, 'damage_resistances')" />
            </label>
            <br />
            <label>
              Immune to <input
              ng-model="userMonsters.monsterArray.damage_immunities"
              ng-value="userMonsters.monsterArray.damage_immunities"
              ng-change="change(userMonsters, 'damage_immunities')" />
            </label>
            <br />
            <label>
              Vulnerable to <input
              ng-model="userMonsters.monsterArray.damage_vulnerabilities"
              ng-value="userMonsters.monsterArray.damage_vulnerabilities"
              ng-change="change(userMonsters, 'damage_vulnerabilities')" />
            </label>
        </div>

        <p><strong>Senses: </strong></p>
        <input
        ng-model="userMonsters.monsterArray.senses"
        ng-value="userMonsters.monsterArray.senses"
        ng-change="change(userMonsters, 'senses')" />

        <p><strong>Languages: </strong></p>
        <input
        ng-model="userMonsters.monsterArray.languages"
        ng-value="userMonsters.monsterArray.languages"
        ng-change="change(userMonsters, 'languages')" />
    </div>
    </div>

    <div ng-init="showMonsterActions = false" ng-show="showMonsterActions">
        <div class="section abilities" ng-repeat="userAbilities in userMonsters.monsterArray.special_abilities">
          <p>
            <strong>Abilities: </strong>
          </p>
            <input ng-model="userAbilities.name"
            ng-value="userAbilities.name"
            ng-change="change(userAbilities, 'name')"
            />

            <textarea ng-model="userAbilities.desc"
            ng-value="userAbilities.desc"
            ng-change="change(userAbilities, 'desc')"
            ></textarea>

            <label>
              Attack Bonus:
              <input type="number" ng-model="userAbilities.attack_bonus"
              ng-value="userAbilities.attack_bonus"
              ng-change="change(userAbilities, 'attack_bonus')"
              />
            </label>

            <label>
              Damage Dice:
              <input ng-model="userAbilities.damage_dice"
              ng-value="userAbilities.damage_dice"
              ng-change="change(userAbilities, 'damage_dice')"
              />
            </label>

            <label>
              Damage Bonus:
              <input type="number" ng-model="userAbilities.damage_bonus"
              ng-value="userAbilities.damage_bonus"
              ng-change="change(userAbilities, 'damage_bonus')"
              />
            </label>

      </div>
      <div class="section abilities" ng-repeat="userAttacks in userMonsters.monsterArray.actions">
        <p>
          <strong>Attack: </strong>
        </p>
          <input ng-model="userAttacks.name"
          ng-value="userAttacks.name"
          ng-change="change(userAttacks, 'name')"
          />

          <textarea ng-model="userAttacks.desc"
          ng-value="userAttacks.desc"
          ng-change="change(userAttacks, 'desc')"
          ></textarea>

          <label>
            Attack Bonus:
            <input type="number" ng-model="userAttacks.attack_bonus"
            ng-value="userAttacks.attack_bonus"
            ng-change="change(userAttacks, 'attack_bonus')"
            />
          </label>

          <label>
            Damage Dice:
            <input ng-model="userAttacks.damage_dice"
            ng-value="userAttacks.damage_dice"
            ng-change="change(userAttacks, 'damage_dice')"
            />
          </label>

          <label>
            Damage Bonus:
            <input type="number" ng-model="userAttacks.damage_bonus"
            ng-value="userAttacks.damage_bonus"
            ng-change="change(userAttacks, 'damage_bonus')"
            />
          </label>
      </div>
      <div class="section" ng-repeat="legendAbilites in userMonsters.monsterArray.legendary_actions">
        <strong><h4>Legendary Ability</h4></strong>
          <p>
            <strong>{{legendAbilites.name}}</strong>
          </p>
          <p>
            {{legendAbilites.desc}}
          </p>
      </div>
    </div>

  </div>
</div>
